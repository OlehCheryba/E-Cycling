!function(e){let t=localStorage.getItem("ok");const o=$("body").prop("classList"),r=$("main").prop("classList");"yes"===t&&(o.add("themecol"),o.add("themebgcol"),r.add("themebgcol"),e.html("Світла тема")),e.on("click",()=>{t="yes"===t?"no":"yes",o.contains("themecol")?o.remove("themecol"):o.add("themecol"),o.contains("themebgcol")?o.remove("themebgcol"):o.add("themebgcol"),r.contains("themebgcol")?r.remove("themebgcol"):r.add("themebgcol"),e.html("yes"===t?"Світла тема":"Темна тема"),localStorage.setItem("ok",t)})}($("#switch-theme"));const e=e=>e.prop("classList").contains("hidden")?e.prop("classList").remove("hidden"):e.prop("classList").add("hidden");new class{constructor(e,t){this.div=t,this.productList=e,this.addAutorize()}addAutorize(){this.div.html('<form id="auto" autocomplete="on">\n        <input type="text" id="inpLogin" class="form-control input" placeholder="Логін">\n        <input type="password" id="inpPassword" class="form-control input" placeholder ="Пароль">\n        <input type="submit" class="btn btn-primary" value="Увійти">\n      </form>'),$("#auto").on("submit",e=>{e.preventDefault(),fetch("login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({login:$("#inpLogin").prop("value"),password:$("#inpPassword").prop("value")})}).then(e=>e.text()).then(e=>"true"===e?this.renderAdminPanel():alert("Не вірний логін або пароль"))})}renderAdminPanel(){this.div.html("<form id='ownerFormAdd'>\n        <input type='file' name='filetoupload' id='filetoupload'>\n        <input id='addBikeName' type='text' class='form-control' placeholder='Назва товару' required>\n        <input id='addBikePrice' type='text' class='form-control' placeholder='Ціна товару' required>\n        <input id='addBikeDescription' class='form-control' type='text' placeholder='Oпис товару' required>\n        <input type='submit' class='btn btn-primary' value='Додати товар'>\n      </form>\n      <form id='ownerFormRemove'>\n        <input id='removeBikeName' class='form-control' type='text' placeholder='Назва товару для видалення' required>\n        <input type='submit' class='btn btn-primary' value='Видалити товар'>\n      </form>\n      Замовлення:\n      <table id='orders'></table>\n      <button id='delOrders' class='btn btn-primary d-block'>Очистити список замовлень</button>\n      Замовлення по імені товару:\n      <table id='fast-orders'></table>\n      <button id='delFastOrders' class='btn btn-primary d-block'>Очистити список замовлень по імені товару</button>\n      Передзвоніть мені:\n      <table id='call-me'></table>\n      <button id='delCallMe' class='btn btn-primary d-block'>Очистити список передзвоніть мені</button>"),this.prepareTable("getOrders",$("#orders")),this.prepareTable("getFastOrders",$("#fast-orders")),this.prepareTable("getCallMe",$("#call-me")),this.addEventListeners()}async prepareTable(e,t){const o=await fetch(e);let r;(await o.json()).forEach(e=>{delete e._id,r+="<tr>";for(let t of e)r+=`<td>${t}</td>`;r+="</tr>"}),t.append(r)}addEventListeners(){$("#delOrders").on("click",()=>this.delData("orders")),$("#delFastOrders").on("click",()=>this.delData("fast-orders")),$("#delCallMe").on("click",()=>this.delData("call-me")),$("#ownerFormAdd").on("submit",e=>{e.preventDefault(),this.addItem()}),$("#ownerFormRemove").on("submit",e=>{e.preventDefault(),this.removeItem()})}addItem(){const e={name:$("#addBikeName").prop("value"),price:$("#addBikePrice").prop("value"),description:$("#addBikeDescription").prop("value"),fileName:$("#filetoupload").prop("value")?$("#filetoupload").prop("value").match(/[^\\]+$/)[0]:"bike-offroad.jpg"},t=new FormData(document.querySelector("#ownerFormAdd"));t.append("item",JSON.stringify(e)),fetch("addItem",{method:"POST",headers:{"Content-Type":"multipart/form-data"},body:t}),this.productList.renderItem(e)}removeItem(){const e=$("#removeBikeName").prop("value");fetch("delItem",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({nameToRemove:e})}),$(`#${e.replace(/ /g,"-")}`).remove()}delData(e){fetch("delData",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({nameToRemove:e})}),$(`#${e}`).remove()}}(new class{constructor(e){fetch("getProducts").then(e=>e.json()).then(e=>e.forEach(e=>this.renderItem(e))),this.div=e,this.addEventListeners()}renderItem(e){this.div.append(`<div class='section-our-products-product' id=${e.name.replace(/ /g,"-")}>\n        <img src='img/products/${e.fileName}' alt='Картинка товару' class='section-our-products-image'>\n        ${e.name}<br>${e.price}$\n        <div class='description hidden'>${e.description}</div>\n        <button class='buy btn-primary'>Замовити</button>\n        <img src='img/bookmark.png' alt='Закладка' class='section-our-products-bookmark'>\n        <span class='section-our-products-see-more'>більше про товар ▼</span>\n      </div>`)}addEventListeners(){this.div.on("click",t=>{t.target.classList.contains("buy")&&fetch("addOrd",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productName:t.target.parentNode.id,number:prompt("Введіть ваш номер телефону і ми вам зателефонуємо:")})}),t.target.classList.contains("section-our-products-see-more")&&(e($(`#${t.target.parentNode.id} .description`)),t.target.innerHTML=$(`#${t.target.parentNode.id} .description`).prop("classList").contains("hidden")?"більше про товар ▼":"приховати деталі ▲")})}}($("#section-our-products")),$("#owner-panel"));$("#header-menu-ikon").on("click",()=>e($("#header-div"))),$("#owner").on("click",()=>e($("#owner-panel"))),$("#section-constructor-form").on("submit",e=>{e.preventDefault(),fetch("addOrder",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:$("#section-constructor-form #name").prop("value"),number:$("#section-constructor-form #number").prop("value"),typeMotor:$("#section-constructor-form #type-motor").prop("value"),typeBattery:$("#section-constructor-form #type-battery").prop("value"),sizeWheel:$("input[name='size-wheel']:checked").prop("value"),widthWheel:$("input[name='width-wheel']:checked").prop("value"),charger:$("input[name='charger']").prop("checked"),doublePendant:$("input[name='double-pendant']").prop("checked"),wings:$("input[name='wings']").prop("checked"),coment:$("textarea[name='coment']").prop("value")})}).then(()=>alert("Ми вам зателефонуємо"),()=>alert("Виникла помилка. Спробуйте пізніше.")),$("#section-constructor-form").reset()}),$("#section-question-form").on("submit",e=>{e.preventDefault(),fetch("callMe",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({number:$("#CallMeNumber").prop("value")})}).then(()=>alert("Ми вам зателефонуємо"),()=>alert("Виникла помилка. Спробуйте пізніше.")),$("#section-question-form").reset()});